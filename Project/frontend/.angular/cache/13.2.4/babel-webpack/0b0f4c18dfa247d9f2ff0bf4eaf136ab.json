{"ast":null,"code":"import { catchError, EMPTY, map, of, switchMap, take, tap } from \"rxjs\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/sauces.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../services/auth.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/material/progress-spinner\";\nimport * as i6 from \"@angular/material/button\";\n\nfunction SingleSauceComponent_mat_spinner_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"mat-spinner\");\n  }\n}\n\nconst _c0 = function (a0, a1, a2) {\n  return {\n    \"fas liked\": a0,\n    far: a1,\n    disabled: a2\n  };\n};\n\nconst _c1 = function (a0, a1, a2) {\n  return {\n    \"fas disliked\": a0,\n    far: a1,\n    disabled: a2\n  };\n};\n\nfunction SingleSauceComponent_div_1_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 13)(1, \"div\", 14)(2, \"i\", 15);\n    i0.ɵɵlistener(\"click\", function SingleSauceComponent_div_1_div_11_Template_i_click_2_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r7 = i0.ɵɵnextContext(2);\n      return ctx_r7.onLike();\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"span\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"div\", 16)(6, \"i\", 17);\n    i0.ɵɵlistener(\"click\", function SingleSauceComponent_div_1_div_11_Template_i_click_6_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r9 = i0.ɵɵnextContext(2);\n      return ctx_r9.onDislike();\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"span\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const sauce_r2 = i0.ɵɵnextContext().ngIf;\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction3(4, _c0, ctx_r3.liked, !ctx_r3.liked, ctx_r3.disliked));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(sauce_r2.likes);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction3(8, _c1, ctx_r3.disliked, !ctx_r3.disliked, ctx_r3.liked));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(sauce_r2.dislikes);\n  }\n}\n\nfunction SingleSauceComponent_div_1_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 18);\n    i0.ɵɵelement(1, \"mat-spinner\", 19);\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction SingleSauceComponent_div_1_button_16_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 20);\n    i0.ɵɵlistener(\"click\", function SingleSauceComponent_div_1_button_16_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r11 = i0.ɵɵnextContext(2);\n      return ctx_r11.onModify();\n    });\n    i0.ɵɵtext(1, \" MODIFY \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction SingleSauceComponent_div_1_button_17_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r14 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 21);\n    i0.ɵɵlistener(\"click\", function SingleSauceComponent_div_1_button_17_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r13 = i0.ɵɵnextContext(2);\n      return ctx_r13.onDelete();\n    });\n    i0.ɵɵtext(1, \" DELETE \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction SingleSauceComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r16 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 2);\n    i0.ɵɵelement(1, \"img\", 3);\n    i0.ɵɵelementStart(2, \"div\", 4)(3, \"h1\", 5);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\", 6);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"h3\");\n    i0.ɵɵtext(8, \"Description\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"p\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(11, SingleSauceComponent_div_1_div_11_Template, 9, 12, \"div\", 7);\n    i0.ɵɵtemplate(12, SingleSauceComponent_div_1_div_12_Template, 2, 0, \"div\", 8);\n    i0.ɵɵelementStart(13, \"div\", 9)(14, \"button\", 10);\n    i0.ɵɵlistener(\"click\", function SingleSauceComponent_div_1_Template_button_click_14_listener() {\n      i0.ɵɵrestoreView(_r16);\n      const ctx_r15 = i0.ɵɵnextContext();\n      return ctx_r15.onBack();\n    });\n    i0.ɵɵtext(15, \"BACK\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(16, SingleSauceComponent_div_1_button_16_Template, 2, 0, \"button\", 11);\n    i0.ɵɵtemplate(17, SingleSauceComponent_div_1_button_17_Template, 2, 0, \"button\", 12);\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const sauce_r2 = ctx.ngIf;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"src\", sauce_r2 == null ? null : sauce_r2.imageUrl, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(sauce_r2 == null ? null : sauce_r2.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"by \", sauce_r2 == null ? null : sauce_r2.manufacturer, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(sauce_r2.description);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r1.likePending);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.likePending);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.userId === sauce_r2.userId);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.userId === sauce_r2.userId);\n  }\n}\n\nexport class SingleSauceComponent {\n  constructor(sauces, route, auth, router) {\n    this.sauces = sauces;\n    this.route = route;\n    this.auth = auth;\n    this.router = router;\n  }\n\n  ngOnInit() {\n    this.userId = this.auth.getUserId();\n    this.loading = true;\n    this.userId = this.auth.getUserId();\n    this.sauce$ = this.route.params.pipe(map(params => params[\"id\"]), switchMap(id => this.sauces.getSauceById(id)), tap(sauce => {\n      this.loading = false;\n\n      if (sauce.usersLiked.find(user => user === this.userId)) {\n        this.liked = true;\n      } else if (sauce.usersDisliked.find(user => user === this.userId)) {\n        this.disliked = true;\n      }\n    }));\n  }\n\n  onLike() {\n    if (this.disliked) {\n      return;\n    }\n\n    this.likePending = true;\n    this.sauce$.pipe(take(1), switchMap(sauce => this.sauces.likeSauce(sauce._id, !this.liked).pipe(tap(liked => {\n      this.likePending = false;\n      this.liked = liked;\n    }), map(liked => Object.assign(Object.assign({}, sauce), {\n      likes: liked ? sauce.likes + 1 : sauce.likes - 1\n    })), tap(sauce => this.sauce$ = of(sauce))))).subscribe();\n  }\n\n  onDislike() {\n    if (this.liked) {\n      return;\n    }\n\n    this.likePending = true;\n    this.sauce$.pipe(take(1), switchMap(sauce => this.sauces.dislikeSauce(sauce._id, !this.disliked).pipe(tap(disliked => {\n      this.likePending = false;\n      this.disliked = disliked;\n    }), map(disliked => Object.assign(Object.assign({}, sauce), {\n      dislikes: disliked ? sauce.dislikes + 1 : sauce.dislikes - 1\n    })), tap(sauce => this.sauce$ = of(sauce))))).subscribe();\n  }\n\n  onBack() {\n    this.router.navigate([\"/sauces\"]);\n  }\n\n  onModify() {\n    this.sauce$.pipe(take(1), tap(sauce => this.router.navigate([\"/modify-sauce\", sauce._id]))).subscribe();\n  }\n\n  onDelete() {\n    this.loading = true;\n    this.sauce$.pipe(take(1), switchMap(sauce => this.sauces.deleteSauce(sauce._id)), tap(message => {\n      console.log(message);\n      this.loading = false;\n      this.router.navigate([\"/sauces\"]);\n    }), catchError(error => {\n      this.loading = false;\n      this.errorMessage = error.message;\n      console.error(error);\n      return EMPTY;\n    })).subscribe();\n  }\n\n}\n\nSingleSauceComponent.ɵfac = function SingleSauceComponent_Factory(t) {\n  return new (t || SingleSauceComponent)(i0.ɵɵdirectiveInject(i1.SaucesService), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i3.AuthService), i0.ɵɵdirectiveInject(i2.Router));\n};\n\nSingleSauceComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: SingleSauceComponent,\n  selectors: [[\"app-single-sauce\"]],\n  decls: 3,\n  vars: 4,\n  consts: [[4, \"ngIf\"], [\"class\", \"sauce-container\", 4, \"ngIf\"], [1, \"sauce-container\"], [\"alt\", \"\", 3, \"src\"], [1, \"sauce-info\"], [1, \"sauce-name\"], [1, \"manufacturer\"], [\"class\", \"like-buttons\", 4, \"ngIf\"], [\"class\", \"like-pending\", 4, \"ngIf\"], [1, \"control-buttons\"], [\"mat-raised-button\", \"\", 3, \"click\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 3, \"click\", 4, \"ngIf\"], [\"mat-raised-button\", \"\", \"color\", \"warn\", 3, \"click\", 4, \"ngIf\"], [1, \"like-buttons\"], [1, \"likes\"], [1, \"like\", \"fa-thumbs-up\", \"fa-lg\", 3, \"ngClass\", \"click\"], [1, \"dislikes\"], [1, \"dislike\", \"fa-thumbs-down\", \"fa-lg\", 3, \"ngClass\", \"click\"], [1, \"like-pending\"], [1, \"white-spinner\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 3, \"click\"], [\"mat-raised-button\", \"\", \"color\", \"warn\", 3, \"click\"]],\n  template: function SingleSauceComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, SingleSauceComponent_mat_spinner_0_Template, 1, 0, \"mat-spinner\", 0);\n      i0.ɵɵtemplate(1, SingleSauceComponent_div_1_Template, 18, 8, \"div\", 1);\n      i0.ɵɵpipe(2, \"async\");\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", ctx.loading);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(2, 2, ctx.sauce$));\n    }\n  },\n  directives: [i4.NgIf, i5.MatSpinner, i4.NgClass, i6.MatButton],\n  pipes: [i4.AsyncPipe],\n  styles: [\".sauce-container[_ngcontent-%COMP%] {\\n  display: flex;\\n}\\n.sauce-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\\n  max-height: 70vh;\\n  flex: 1;\\n}\\n.sauce-info[_ngcontent-%COMP%] {\\n  padding: 40px 20px;\\n  flex: 1;\\n}\\n.manufacturer[_ngcontent-%COMP%] {\\n  margin: 0;\\n}\\n.sauce-name[_ngcontent-%COMP%] {\\n  margin: 0;\\n}\\n.like-buttons[_ngcontent-%COMP%] {\\n  display: flex;\\n}\\n.like-buttons[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\\n  margin-right: 0.5em;\\n  cursor: pointer;\\n}\\n.likes[_ngcontent-%COMP%], .dislikes[_ngcontent-%COMP%] {\\n  margin: 0 0.4em;\\n}\\n.liked[_ngcontent-%COMP%] {\\n  color: #33db00;\\n}\\n.disliked[_ngcontent-%COMP%] {\\n  color: #db3300;\\n}\\n.like[_ngcontent-%COMP%]:hover {\\n  color: #33db00;\\n}\\n.dislike[_ngcontent-%COMP%] {\\n  transform: scaleX(-1) translateY(5px);\\n}\\n.dislike[_ngcontent-%COMP%]:hover {\\n  color: #db3300;\\n}\\n.disabled[_ngcontent-%COMP%] {\\n  cursor: none;\\n  color: #bebebe;\\n}\\n.disabled[_ngcontent-%COMP%]:hover {\\n  color: #bebebe;\\n}\\n.control-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\\n  margin: 1em 1em 0 0;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNpbmdsZS1zYXVjZS5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGFBQUE7QUFDSjtBQUFJO0VBQ0ksZ0JBQUE7RUFDQSxPQUFBO0FBRVI7QUFFQTtFQUNJLGtCQUFBO0VBQ0EsT0FBQTtBQUNKO0FBRUE7RUFDSSxTQUFBO0FBQ0o7QUFFQTtFQUNJLFNBQUE7QUFDSjtBQUVBO0VBQ0ksYUFBQTtBQUNKO0FBQUk7RUFDSSxtQkFBQTtFQUNBLGVBQUE7QUFFUjtBQUVBOztFQUVJLGVBQUE7QUFDSjtBQUVBO0VBQ0ksY0FBQTtBQUNKO0FBRUE7RUFDSSxjQUFBO0FBQ0o7QUFHSTtFQUNJLGNBQUE7QUFBUjtBQUlBO0VBQ0kscUNBQUE7QUFESjtBQUVJO0VBQ0ksY0FBQTtBQUFSO0FBSUE7RUFDSSxZQUFBO0VBSUEsY0FBQTtBQUpKO0FBQ0k7RUFDSSxjQUFBO0FBQ1I7QUFLSTtFQUNJLG1CQUFBO0FBRlIiLCJmaWxlIjoic2luZ2xlLXNhdWNlLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLnNhdWNlLWNvbnRhaW5lciB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBpbWcge1xuICAgICAgICBtYXgtaGVpZ2h0OiA3MHZoO1xuICAgICAgICBmbGV4OiAxO1xuICAgIH1cbn1cblxuLnNhdWNlLWluZm8ge1xuICAgIHBhZGRpbmc6IDQwcHggMjBweDtcbiAgICBmbGV4OiAxO1xufVxuXG4ubWFudWZhY3R1cmVyIHtcbiAgICBtYXJnaW46IDA7XG59XG5cbi5zYXVjZS1uYW1lIHtcbiAgICBtYXJnaW46IDA7XG59XG5cbi5saWtlLWJ1dHRvbnMge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgaSB7XG4gICAgICAgIG1hcmdpbi1yaWdodDogMC41ZW07XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICB9XG59XG5cbi5saWtlcyxcbi5kaXNsaWtlcyB7XG4gICAgbWFyZ2luOiAwIDAuNGVtO1xufVxuXG4ubGlrZWQge1xuICAgIGNvbG9yOiByZ2JhKDUxLCAyMTksIDAsIDEpO1xufVxuXG4uZGlzbGlrZWQge1xuICAgIGNvbG9yOiByZ2JhKDIxOSwgNTEsIDAsIDEpO1xufVxuXG4ubGlrZSB7XG4gICAgJjpob3ZlciB7XG4gICAgICAgIGNvbG9yOiByZ2JhKDUxLCAyMTksIDAsIDEpO1xuICAgIH1cbn1cblxuLmRpc2xpa2Uge1xuICAgIHRyYW5zZm9ybTogc2NhbGVYKC0xKSB0cmFuc2xhdGVZKDVweCk7XG4gICAgJjpob3ZlciB7XG4gICAgICAgIGNvbG9yOiByZ2JhKDIxOSwgNTEsIDAsIDEpO1xuICAgIH1cbn1cblxuLmRpc2FibGVkIHtcbiAgICBjdXJzb3I6IG5vbmU7XG4gICAgJjpob3ZlciB7XG4gICAgICAgIGNvbG9yOiByZ2JhKDE5MCwgMTkwLCAxOTAsIDEpO1xuICAgIH1cbiAgICBjb2xvcjogcmdiYSgxOTAsIDE5MCwgMTkwLCAxKTtcbn1cblxuLmNvbnRyb2wtYnV0dG9ucyB7XG4gICAgYnV0dG9uIHtcbiAgICAgICAgbWFyZ2luOiAxZW0gMWVtIDAgMDtcbiAgICB9XG59XG4iXX0= */\"]\n});","map":{"version":3,"sources":["/Users/mathildelaurent/Documents/P6_laurent_mathilde/Project/frontend/src/app/single-sauce/single-sauce.component.ts"],"names":["catchError","EMPTY","map","of","switchMap","take","tap","i0","i1","i2","i3","i4","i5","i6","SingleSauceComponent_mat_spinner_0_Template","rf","ctx","ɵɵelement","_c0","a0","a1","a2","far","disabled","_c1","SingleSauceComponent_div_1_div_11_Template","_r8","ɵɵgetCurrentView","ɵɵelementStart","ɵɵlistener","SingleSauceComponent_div_1_div_11_Template_i_click_2_listener","ɵɵrestoreView","ctx_r7","ɵɵnextContext","onLike","ɵɵelementEnd","ɵɵtext","SingleSauceComponent_div_1_div_11_Template_i_click_6_listener","ctx_r9","onDislike","sauce_r2","ngIf","ctx_r3","ɵɵadvance","ɵɵproperty","ɵɵpureFunction3","liked","disliked","ɵɵtextInterpolate","likes","dislikes","SingleSauceComponent_div_1_div_12_Template","SingleSauceComponent_div_1_button_16_Template","_r12","SingleSauceComponent_div_1_button_16_Template_button_click_0_listener","ctx_r11","onModify","SingleSauceComponent_div_1_button_17_Template","_r14","SingleSauceComponent_div_1_button_17_Template_button_click_0_listener","ctx_r13","onDelete","SingleSauceComponent_div_1_Template","_r16","ɵɵtemplate","SingleSauceComponent_div_1_Template_button_click_14_listener","ctx_r15","onBack","ctx_r1","imageUrl","ɵɵsanitizeUrl","name","ɵɵtextInterpolate1","manufacturer","description","likePending","userId","SingleSauceComponent","constructor","sauces","route","auth","router","ngOnInit","getUserId","loading","sauce$","params","pipe","id","getSauceById","sauce","usersLiked","find","user","usersDisliked","likeSauce","_id","Object","assign","subscribe","dislikeSauce","navigate","deleteSauce","message","console","log","error","errorMessage","ɵfac","SingleSauceComponent_Factory","t","ɵɵdirectiveInject","SaucesService","ActivatedRoute","AuthService","Router","ɵcmp","ɵɵdefineComponent","type","selectors","decls","vars","consts","template","SingleSauceComponent_Template","ɵɵpipe","ɵɵpipeBind1","directives","NgIf","MatSpinner","NgClass","MatButton","pipes","AsyncPipe","styles"],"mappings":"AAAA,SAASA,UAAT,EAAqBC,KAArB,EAA4BC,GAA5B,EAAiCC,EAAjC,EAAqCC,SAArC,EAAgDC,IAAhD,EAAsDC,GAAtD,QAAkE,MAAlE;AACA,OAAO,KAAKC,EAAZ,MAAoB,eAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,4BAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,iBAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,0BAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,iBAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,oCAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,0BAApB;;AACA,SAASC,2CAAT,CAAqDC,EAArD,EAAyDC,GAAzD,EAA8D;AAAE,MAAID,EAAE,GAAG,CAAT,EAAY;AACxER,IAAAA,EAAE,CAACU,SAAH,CAAa,CAAb,EAAgB,aAAhB;AACH;AAAE;;AACH,MAAMC,GAAG,GAAG,UAAUC,EAAV,EAAcC,EAAd,EAAkBC,EAAlB,EAAsB;AAAE,SAAO;AAAE,iBAAaF,EAAf;AAAmBG,IAAAA,GAAG,EAAEF,EAAxB;AAA4BG,IAAAA,QAAQ,EAAEF;AAAtC,GAAP;AAAoD,CAAxF;;AACA,MAAMG,GAAG,GAAG,UAAUL,EAAV,EAAcC,EAAd,EAAkBC,EAAlB,EAAsB;AAAE,SAAO;AAAE,oBAAgBF,EAAlB;AAAsBG,IAAAA,GAAG,EAAEF,EAA3B;AAA+BG,IAAAA,QAAQ,EAAEF;AAAzC,GAAP;AAAuD,CAA3F;;AACA,SAASI,0CAAT,CAAoDV,EAApD,EAAwDC,GAAxD,EAA6D;AAAE,MAAID,EAAE,GAAG,CAAT,EAAY;AACvE,UAAMW,GAAG,GAAGnB,EAAE,CAACoB,gBAAH,EAAZ;;AACApB,IAAAA,EAAE,CAACqB,cAAH,CAAkB,CAAlB,EAAqB,KAArB,EAA4B,EAA5B,EAAgC,CAAhC,EAAmC,KAAnC,EAA0C,EAA1C,EAA8C,CAA9C,EAAiD,GAAjD,EAAsD,EAAtD;AACArB,IAAAA,EAAE,CAACsB,UAAH,CAAc,OAAd,EAAuB,SAASC,6DAAT,GAAyE;AAAEvB,MAAAA,EAAE,CAACwB,aAAH,CAAiBL,GAAjB;AAAuB,YAAMM,MAAM,GAAGzB,EAAE,CAAC0B,aAAH,CAAiB,CAAjB,CAAf;AAAoC,aAAOD,MAAM,CAACE,MAAP,EAAP;AAAyB,KAAtL;AACA3B,IAAAA,EAAE,CAAC4B,YAAH;AACA5B,IAAAA,EAAE,CAACqB,cAAH,CAAkB,CAAlB,EAAqB,MAArB;AACArB,IAAAA,EAAE,CAAC6B,MAAH,CAAU,CAAV;AACA7B,IAAAA,EAAE,CAAC4B,YAAH;AACA5B,IAAAA,EAAE,CAACqB,cAAH,CAAkB,CAAlB,EAAqB,KAArB,EAA4B,EAA5B,EAAgC,CAAhC,EAAmC,GAAnC,EAAwC,EAAxC;AACArB,IAAAA,EAAE,CAACsB,UAAH,CAAc,OAAd,EAAuB,SAASQ,6DAAT,GAAyE;AAAE9B,MAAAA,EAAE,CAACwB,aAAH,CAAiBL,GAAjB;AAAuB,YAAMY,MAAM,GAAG/B,EAAE,CAAC0B,aAAH,CAAiB,CAAjB,CAAf;AAAoC,aAAOK,MAAM,CAACC,SAAP,EAAP;AAA4B,KAAzL;AACAhC,IAAAA,EAAE,CAAC4B,YAAH;AACA5B,IAAAA,EAAE,CAACqB,cAAH,CAAkB,CAAlB,EAAqB,MAArB;AACArB,IAAAA,EAAE,CAAC6B,MAAH,CAAU,CAAV;AACA7B,IAAAA,EAAE,CAAC4B,YAAH;AACH;;AAAC,MAAIpB,EAAE,GAAG,CAAT,EAAY;AACV,UAAMyB,QAAQ,GAAGjC,EAAE,CAAC0B,aAAH,GAAmBQ,IAApC;AACA,UAAMC,MAAM,GAAGnC,EAAE,CAAC0B,aAAH,EAAf;AACA1B,IAAAA,EAAE,CAACoC,SAAH,CAAa,CAAb;AACApC,IAAAA,EAAE,CAACqC,UAAH,CAAc,SAAd,EAAyBrC,EAAE,CAACsC,eAAH,CAAmB,CAAnB,EAAsB3B,GAAtB,EAA2BwB,MAAM,CAACI,KAAlC,EAAyC,CAACJ,MAAM,CAACI,KAAjD,EAAwDJ,MAAM,CAACK,QAA/D,CAAzB;AACAxC,IAAAA,EAAE,CAACoC,SAAH,CAAa,CAAb;AACApC,IAAAA,EAAE,CAACyC,iBAAH,CAAqBR,QAAQ,CAACS,KAA9B;AACA1C,IAAAA,EAAE,CAACoC,SAAH,CAAa,CAAb;AACApC,IAAAA,EAAE,CAACqC,UAAH,CAAc,SAAd,EAAyBrC,EAAE,CAACsC,eAAH,CAAmB,CAAnB,EAAsBrB,GAAtB,EAA2BkB,MAAM,CAACK,QAAlC,EAA4C,CAACL,MAAM,CAACK,QAApD,EAA8DL,MAAM,CAACI,KAArE,CAAzB;AACAvC,IAAAA,EAAE,CAACoC,SAAH,CAAa,CAAb;AACApC,IAAAA,EAAE,CAACyC,iBAAH,CAAqBR,QAAQ,CAACU,QAA9B;AACH;AAAE;;AACH,SAASC,0CAAT,CAAoDpC,EAApD,EAAwDC,GAAxD,EAA6D;AAAE,MAAID,EAAE,GAAG,CAAT,EAAY;AACvER,IAAAA,EAAE,CAACqB,cAAH,CAAkB,CAAlB,EAAqB,KAArB,EAA4B,EAA5B;AACArB,IAAAA,EAAE,CAACU,SAAH,CAAa,CAAb,EAAgB,aAAhB,EAA+B,EAA/B;AACAV,IAAAA,EAAE,CAAC4B,YAAH;AACH;AAAE;;AACH,SAASiB,6CAAT,CAAuDrC,EAAvD,EAA2DC,GAA3D,EAAgE;AAAE,MAAID,EAAE,GAAG,CAAT,EAAY;AAC1E,UAAMsC,IAAI,GAAG9C,EAAE,CAACoB,gBAAH,EAAb;;AACApB,IAAAA,EAAE,CAACqB,cAAH,CAAkB,CAAlB,EAAqB,QAArB,EAA+B,EAA/B;AACArB,IAAAA,EAAE,CAACsB,UAAH,CAAc,OAAd,EAAuB,SAASyB,qEAAT,GAAiF;AAAE/C,MAAAA,EAAE,CAACwB,aAAH,CAAiBsB,IAAjB;AAAwB,YAAME,OAAO,GAAGhD,EAAE,CAAC0B,aAAH,CAAiB,CAAjB,CAAhB;AAAqC,aAAOsB,OAAO,CAACC,QAAR,EAAP;AAA4B,KAAnM;AACAjD,IAAAA,EAAE,CAAC6B,MAAH,CAAU,CAAV,EAAa,UAAb;AACA7B,IAAAA,EAAE,CAAC4B,YAAH;AACH;AAAE;;AACH,SAASsB,6CAAT,CAAuD1C,EAAvD,EAA2DC,GAA3D,EAAgE;AAAE,MAAID,EAAE,GAAG,CAAT,EAAY;AAC1E,UAAM2C,IAAI,GAAGnD,EAAE,CAACoB,gBAAH,EAAb;;AACApB,IAAAA,EAAE,CAACqB,cAAH,CAAkB,CAAlB,EAAqB,QAArB,EAA+B,EAA/B;AACArB,IAAAA,EAAE,CAACsB,UAAH,CAAc,OAAd,EAAuB,SAAS8B,qEAAT,GAAiF;AAAEpD,MAAAA,EAAE,CAACwB,aAAH,CAAiB2B,IAAjB;AAAwB,YAAME,OAAO,GAAGrD,EAAE,CAAC0B,aAAH,CAAiB,CAAjB,CAAhB;AAAqC,aAAO2B,OAAO,CAACC,QAAR,EAAP;AAA4B,KAAnM;AACAtD,IAAAA,EAAE,CAAC6B,MAAH,CAAU,CAAV,EAAa,UAAb;AACA7B,IAAAA,EAAE,CAAC4B,YAAH;AACH;AAAE;;AACH,SAAS2B,mCAAT,CAA6C/C,EAA7C,EAAiDC,GAAjD,EAAsD;AAAE,MAAID,EAAE,GAAG,CAAT,EAAY;AAChE,UAAMgD,IAAI,GAAGxD,EAAE,CAACoB,gBAAH,EAAb;;AACApB,IAAAA,EAAE,CAACqB,cAAH,CAAkB,CAAlB,EAAqB,KAArB,EAA4B,CAA5B;AACArB,IAAAA,EAAE,CAACU,SAAH,CAAa,CAAb,EAAgB,KAAhB,EAAuB,CAAvB;AACAV,IAAAA,EAAE,CAACqB,cAAH,CAAkB,CAAlB,EAAqB,KAArB,EAA4B,CAA5B,EAA+B,CAA/B,EAAkC,IAAlC,EAAwC,CAAxC;AACArB,IAAAA,EAAE,CAAC6B,MAAH,CAAU,CAAV;AACA7B,IAAAA,EAAE,CAAC4B,YAAH;AACA5B,IAAAA,EAAE,CAACqB,cAAH,CAAkB,CAAlB,EAAqB,GAArB,EAA0B,CAA1B;AACArB,IAAAA,EAAE,CAAC6B,MAAH,CAAU,CAAV;AACA7B,IAAAA,EAAE,CAAC4B,YAAH;AACA5B,IAAAA,EAAE,CAACqB,cAAH,CAAkB,CAAlB,EAAqB,IAArB;AACArB,IAAAA,EAAE,CAAC6B,MAAH,CAAU,CAAV,EAAa,aAAb;AACA7B,IAAAA,EAAE,CAAC4B,YAAH;AACA5B,IAAAA,EAAE,CAACqB,cAAH,CAAkB,CAAlB,EAAqB,GAArB;AACArB,IAAAA,EAAE,CAAC6B,MAAH,CAAU,EAAV;AACA7B,IAAAA,EAAE,CAAC4B,YAAH;AACA5B,IAAAA,EAAE,CAACyD,UAAH,CAAc,EAAd,EAAkBvC,0CAAlB,EAA8D,CAA9D,EAAiE,EAAjE,EAAqE,KAArE,EAA4E,CAA5E;AACAlB,IAAAA,EAAE,CAACyD,UAAH,CAAc,EAAd,EAAkBb,0CAAlB,EAA8D,CAA9D,EAAiE,CAAjE,EAAoE,KAApE,EAA2E,CAA3E;AACA5C,IAAAA,EAAE,CAACqB,cAAH,CAAkB,EAAlB,EAAsB,KAAtB,EAA6B,CAA7B,EAAgC,EAAhC,EAAoC,QAApC,EAA8C,EAA9C;AACArB,IAAAA,EAAE,CAACsB,UAAH,CAAc,OAAd,EAAuB,SAASoC,4DAAT,GAAwE;AAAE1D,MAAAA,EAAE,CAACwB,aAAH,CAAiBgC,IAAjB;AAAwB,YAAMG,OAAO,GAAG3D,EAAE,CAAC0B,aAAH,EAAhB;AAAoC,aAAOiC,OAAO,CAACC,MAAR,EAAP;AAA0B,KAAvL;AACA5D,IAAAA,EAAE,CAAC6B,MAAH,CAAU,EAAV,EAAc,MAAd;AACA7B,IAAAA,EAAE,CAAC4B,YAAH;AACA5B,IAAAA,EAAE,CAACyD,UAAH,CAAc,EAAd,EAAkBZ,6CAAlB,EAAiE,CAAjE,EAAoE,CAApE,EAAuE,QAAvE,EAAiF,EAAjF;AACA7C,IAAAA,EAAE,CAACyD,UAAH,CAAc,EAAd,EAAkBP,6CAAlB,EAAiE,CAAjE,EAAoE,CAApE,EAAuE,QAAvE,EAAiF,EAAjF;AACAlD,IAAAA,EAAE,CAAC4B,YAAH;AACH;;AAAC,MAAIpB,EAAE,GAAG,CAAT,EAAY;AACV,UAAMyB,QAAQ,GAAGxB,GAAG,CAACyB,IAArB;AACA,UAAM2B,MAAM,GAAG7D,EAAE,CAAC0B,aAAH,EAAf;AACA1B,IAAAA,EAAE,CAACoC,SAAH,CAAa,CAAb;AACApC,IAAAA,EAAE,CAACqC,UAAH,CAAc,KAAd,EAAqBJ,QAAQ,IAAI,IAAZ,GAAmB,IAAnB,GAA0BA,QAAQ,CAAC6B,QAAxD,EAAkE9D,EAAE,CAAC+D,aAArE;AACA/D,IAAAA,EAAE,CAACoC,SAAH,CAAa,CAAb;AACApC,IAAAA,EAAE,CAACyC,iBAAH,CAAqBR,QAAQ,IAAI,IAAZ,GAAmB,IAAnB,GAA0BA,QAAQ,CAAC+B,IAAxD;AACAhE,IAAAA,EAAE,CAACoC,SAAH,CAAa,CAAb;AACApC,IAAAA,EAAE,CAACiE,kBAAH,CAAsB,KAAtB,EAA6BhC,QAAQ,IAAI,IAAZ,GAAmB,IAAnB,GAA0BA,QAAQ,CAACiC,YAAhE,EAA8E,EAA9E;AACAlE,IAAAA,EAAE,CAACoC,SAAH,CAAa,CAAb;AACApC,IAAAA,EAAE,CAACyC,iBAAH,CAAqBR,QAAQ,CAACkC,WAA9B;AACAnE,IAAAA,EAAE,CAACoC,SAAH,CAAa,CAAb;AACApC,IAAAA,EAAE,CAACqC,UAAH,CAAc,MAAd,EAAsB,CAACwB,MAAM,CAACO,WAA9B;AACApE,IAAAA,EAAE,CAACoC,SAAH,CAAa,CAAb;AACApC,IAAAA,EAAE,CAACqC,UAAH,CAAc,MAAd,EAAsBwB,MAAM,CAACO,WAA7B;AACApE,IAAAA,EAAE,CAACoC,SAAH,CAAa,CAAb;AACApC,IAAAA,EAAE,CAACqC,UAAH,CAAc,MAAd,EAAsBwB,MAAM,CAACQ,MAAP,KAAkBpC,QAAQ,CAACoC,MAAjD;AACArE,IAAAA,EAAE,CAACoC,SAAH,CAAa,CAAb;AACApC,IAAAA,EAAE,CAACqC,UAAH,CAAc,MAAd,EAAsBwB,MAAM,CAACQ,MAAP,KAAkBpC,QAAQ,CAACoC,MAAjD;AACH;AAAE;;AACH,OAAO,MAAMC,oBAAN,CAA2B;AAC9BC,EAAAA,WAAW,CAACC,MAAD,EAASC,KAAT,EAAgBC,IAAhB,EAAsBC,MAAtB,EAA8B;AACrC,SAAKH,MAAL,GAAcA,MAAd;AACA,SAAKC,KAAL,GAAaA,KAAb;AACA,SAAKC,IAAL,GAAYA,IAAZ;AACA,SAAKC,MAAL,GAAcA,MAAd;AACH;;AACDC,EAAAA,QAAQ,GAAG;AACP,SAAKP,MAAL,GAAc,KAAKK,IAAL,CAAUG,SAAV,EAAd;AACA,SAAKC,OAAL,GAAe,IAAf;AACA,SAAKT,MAAL,GAAc,KAAKK,IAAL,CAAUG,SAAV,EAAd;AACA,SAAKE,MAAL,GAAc,KAAKN,KAAL,CAAWO,MAAX,CAAkBC,IAAlB,CAAuBtF,GAAG,CAAEqF,MAAD,IAAYA,MAAM,CAAC,IAAD,CAAnB,CAA1B,EAAsDnF,SAAS,CAAEqF,EAAD,IAAQ,KAAKV,MAAL,CAAYW,YAAZ,CAAyBD,EAAzB,CAAT,CAA/D,EAAuGnF,GAAG,CAAEqF,KAAD,IAAW;AAChI,WAAKN,OAAL,GAAe,KAAf;;AACA,UAAIM,KAAK,CAACC,UAAN,CAAiBC,IAAjB,CAAuBC,IAAD,IAAUA,IAAI,KAAK,KAAKlB,MAA9C,CAAJ,EAA2D;AACvD,aAAK9B,KAAL,GAAa,IAAb;AACH,OAFD,MAGK,IAAI6C,KAAK,CAACI,aAAN,CAAoBF,IAApB,CAA0BC,IAAD,IAAUA,IAAI,KAAK,KAAKlB,MAAjD,CAAJ,EAA8D;AAC/D,aAAK7B,QAAL,GAAgB,IAAhB;AACH;AACJ,KARuH,CAA1G,CAAd;AASH;;AACDb,EAAAA,MAAM,GAAG;AACL,QAAI,KAAKa,QAAT,EAAmB;AACf;AACH;;AACD,SAAK4B,WAAL,GAAmB,IAAnB;AACA,SAAKW,MAAL,CACKE,IADL,CACUnF,IAAI,CAAC,CAAD,CADd,EACmBD,SAAS,CAAEuF,KAAD,IAAW,KAAKZ,MAAL,CAAYiB,SAAZ,CAAsBL,KAAK,CAACM,GAA5B,EAAiC,CAAC,KAAKnD,KAAvC,EAA8C0C,IAA9C,CAAmDlF,GAAG,CAAEwC,KAAD,IAAW;AACtG,WAAK6B,WAAL,GAAmB,KAAnB;AACA,WAAK7B,KAAL,GAAaA,KAAb;AACH,KAH6F,CAAtD,EAGpC5C,GAAG,CAAE4C,KAAD,IAAYoD,MAAM,CAACC,MAAP,CAAcD,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBR,KAAlB,CAAd,EAAwC;AAAE1C,MAAAA,KAAK,EAAEH,KAAK,GAAG6C,KAAK,CAAC1C,KAAN,GAAc,CAAjB,GAAqB0C,KAAK,CAAC1C,KAAN,GAAc;AAAjD,KAAxC,CAAb,CAHiC,EAG6E3C,GAAG,CAAEqF,KAAD,IAAY,KAAKL,MAAL,GAAcnF,EAAE,CAACwF,KAAD,CAA7B,CAHhF,CAAZ,CAD5B,EAKKS,SALL;AAMH;;AACD7D,EAAAA,SAAS,GAAG;AACR,QAAI,KAAKO,KAAT,EAAgB;AACZ;AACH;;AACD,SAAK6B,WAAL,GAAmB,IAAnB;AACA,SAAKW,MAAL,CACKE,IADL,CACUnF,IAAI,CAAC,CAAD,CADd,EACmBD,SAAS,CAAEuF,KAAD,IAAW,KAAKZ,MAAL,CAAYsB,YAAZ,CAAyBV,KAAK,CAACM,GAA/B,EAAoC,CAAC,KAAKlD,QAA1C,EAAoDyC,IAApD,CAAyDlF,GAAG,CAAEyC,QAAD,IAAc;AAC/G,WAAK4B,WAAL,GAAmB,KAAnB;AACA,WAAK5B,QAAL,GAAgBA,QAAhB;AACH,KAHmG,CAA5D,EAGpC7C,GAAG,CAAE6C,QAAD,IAAemD,MAAM,CAACC,MAAP,CAAcD,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBR,KAAlB,CAAd,EAAwC;AAAEzC,MAAAA,QAAQ,EAAEH,QAAQ,GACzE4C,KAAK,CAACzC,QAAN,GAAiB,CADwD,GAEzEyC,KAAK,CAACzC,QAAN,GAAiB;AAFoC,KAAxC,CAAhB,CAHiC,EAKL5C,GAAG,CAAEqF,KAAD,IAAY,KAAKL,MAAL,GAAcnF,EAAE,CAACwF,KAAD,CAA7B,CALE,CAAZ,CAD5B,EAOKS,SAPL;AAQH;;AACDjC,EAAAA,MAAM,GAAG;AACL,SAAKe,MAAL,CAAYoB,QAAZ,CAAqB,CAAC,SAAD,CAArB;AACH;;AACD9C,EAAAA,QAAQ,GAAG;AACP,SAAK8B,MAAL,CACKE,IADL,CACUnF,IAAI,CAAC,CAAD,CADd,EACmBC,GAAG,CAAEqF,KAAD,IAAW,KAAKT,MAAL,CAAYoB,QAAZ,CAAqB,CAAC,eAAD,EAAkBX,KAAK,CAACM,GAAxB,CAArB,CAAZ,CADtB,EAEKG,SAFL;AAGH;;AACDvC,EAAAA,QAAQ,GAAG;AACP,SAAKwB,OAAL,GAAe,IAAf;AACA,SAAKC,MAAL,CACKE,IADL,CACUnF,IAAI,CAAC,CAAD,CADd,EACmBD,SAAS,CAAEuF,KAAD,IAAW,KAAKZ,MAAL,CAAYwB,WAAZ,CAAwBZ,KAAK,CAACM,GAA9B,CAAZ,CAD5B,EAC6E3F,GAAG,CAAEkG,OAAD,IAAa;AAC1FC,MAAAA,OAAO,CAACC,GAAR,CAAYF,OAAZ;AACA,WAAKnB,OAAL,GAAe,KAAf;AACA,WAAKH,MAAL,CAAYoB,QAAZ,CAAqB,CAAC,SAAD,CAArB;AACH,KAJ+E,CADhF,EAKItG,UAAU,CAAE2G,KAAD,IAAW;AACtB,WAAKtB,OAAL,GAAe,KAAf;AACA,WAAKuB,YAAL,GAAoBD,KAAK,CAACH,OAA1B;AACAC,MAAAA,OAAO,CAACE,KAAR,CAAcA,KAAd;AACA,aAAO1G,KAAP;AACH,KALa,CALd,EAWKmG,SAXL;AAYH;;AArE6B;;AAuElCvB,oBAAoB,CAACgC,IAArB,GAA4B,SAASC,4BAAT,CAAsCC,CAAtC,EAAyC;AAAE,SAAO,KAAKA,CAAC,IAAIlC,oBAAV,EAAgCtE,EAAE,CAACyG,iBAAH,CAAqBxG,EAAE,CAACyG,aAAxB,CAAhC,EAAwE1G,EAAE,CAACyG,iBAAH,CAAqBvG,EAAE,CAACyG,cAAxB,CAAxE,EAAiH3G,EAAE,CAACyG,iBAAH,CAAqBtG,EAAE,CAACyG,WAAxB,CAAjH,EAAuJ5G,EAAE,CAACyG,iBAAH,CAAqBvG,EAAE,CAAC2G,MAAxB,CAAvJ,CAAP;AAAiM,CAAxQ;;AACAvC,oBAAoB,CAACwC,IAArB,GAA4B,aAAc9G,EAAE,CAAC+G,iBAAH,CAAqB;AAAEC,EAAAA,IAAI,EAAE1C,oBAAR;AAA8B2C,EAAAA,SAAS,EAAE,CAAC,CAAC,kBAAD,CAAD,CAAzC;AAAiEC,EAAAA,KAAK,EAAE,CAAxE;AAA2EC,EAAAA,IAAI,EAAE,CAAjF;AAAoFC,EAAAA,MAAM,EAAE,CAAC,CAAC,CAAD,EAAI,MAAJ,CAAD,EAAc,CAAC,OAAD,EAAU,iBAAV,EAA6B,CAA7B,EAAgC,MAAhC,CAAd,EAAuD,CAAC,CAAD,EAAI,iBAAJ,CAAvD,EAA+E,CAAC,KAAD,EAAQ,EAAR,EAAY,CAAZ,EAAe,KAAf,CAA/E,EAAsG,CAAC,CAAD,EAAI,YAAJ,CAAtG,EAAyH,CAAC,CAAD,EAAI,YAAJ,CAAzH,EAA4I,CAAC,CAAD,EAAI,cAAJ,CAA5I,EAAiK,CAAC,OAAD,EAAU,cAAV,EAA0B,CAA1B,EAA6B,MAA7B,CAAjK,EAAuM,CAAC,OAAD,EAAU,cAAV,EAA0B,CAA1B,EAA6B,MAA7B,CAAvM,EAA6O,CAAC,CAAD,EAAI,iBAAJ,CAA7O,EAAqQ,CAAC,mBAAD,EAAsB,EAAtB,EAA0B,CAA1B,EAA6B,OAA7B,CAArQ,EAA4S,CAAC,mBAAD,EAAsB,EAAtB,EAA0B,OAA1B,EAAmC,SAAnC,EAA8C,CAA9C,EAAiD,OAAjD,EAA0D,CAA1D,EAA6D,MAA7D,CAA5S,EAAkX,CAAC,mBAAD,EAAsB,EAAtB,EAA0B,OAA1B,EAAmC,MAAnC,EAA2C,CAA3C,EAA8C,OAA9C,EAAuD,CAAvD,EAA0D,MAA1D,CAAlX,EAAqb,CAAC,CAAD,EAAI,cAAJ,CAArb,EAA0c,CAAC,CAAD,EAAI,OAAJ,CAA1c,EAAwd,CAAC,CAAD,EAAI,MAAJ,EAAY,cAAZ,EAA4B,OAA5B,EAAqC,CAArC,EAAwC,SAAxC,EAAmD,OAAnD,CAAxd,EAAqhB,CAAC,CAAD,EAAI,UAAJ,CAArhB,EAAsiB,CAAC,CAAD,EAAI,SAAJ,EAAe,gBAAf,EAAiC,OAAjC,EAA0C,CAA1C,EAA6C,SAA7C,EAAwD,OAAxD,CAAtiB,EAAwmB,CAAC,CAAD,EAAI,cAAJ,CAAxmB,EAA6nB,CAAC,CAAD,EAAI,eAAJ,CAA7nB,EAAmpB,CAAC,mBAAD,EAAsB,EAAtB,EAA0B,OAA1B,EAAmC,SAAnC,EAA8C,CAA9C,EAAiD,OAAjD,CAAnpB,EAA8sB,CAAC,mBAAD,EAAsB,EAAtB,EAA0B,OAA1B,EAAmC,MAAnC,EAA2C,CAA3C,EAA8C,OAA9C,CAA9sB,CAA5F;AAAm2BC,EAAAA,QAAQ,EAAE,SAASC,6BAAT,CAAuC9G,EAAvC,EAA2CC,GAA3C,EAAgD;AAAE,QAAID,EAAE,GAAG,CAAT,EAAY;AACl+BR,MAAAA,EAAE,CAACyD,UAAH,CAAc,CAAd,EAAiBlD,2CAAjB,EAA8D,CAA9D,EAAiE,CAAjE,EAAoE,aAApE,EAAmF,CAAnF;AACAP,MAAAA,EAAE,CAACyD,UAAH,CAAc,CAAd,EAAiBF,mCAAjB,EAAsD,EAAtD,EAA0D,CAA1D,EAA6D,KAA7D,EAAoE,CAApE;AACAvD,MAAAA,EAAE,CAACuH,MAAH,CAAU,CAAV,EAAa,OAAb;AACH;;AAAC,QAAI/G,EAAE,GAAG,CAAT,EAAY;AACVR,MAAAA,EAAE,CAACqC,UAAH,CAAc,MAAd,EAAsB5B,GAAG,CAACqE,OAA1B;AACA9E,MAAAA,EAAE,CAACoC,SAAH,CAAa,CAAb;AACApC,MAAAA,EAAE,CAACqC,UAAH,CAAc,MAAd,EAAsBrC,EAAE,CAACwH,WAAH,CAAe,CAAf,EAAkB,CAAlB,EAAqB/G,GAAG,CAACsE,MAAzB,CAAtB;AACH;AAAE,GARwD;AAQtD0C,EAAAA,UAAU,EAAE,CAACrH,EAAE,CAACsH,IAAJ,EAAUrH,EAAE,CAACsH,UAAb,EAAyBvH,EAAE,CAACwH,OAA5B,EAAqCtH,EAAE,CAACuH,SAAxC,CAR0C;AAQUC,EAAAA,KAAK,EAAE,CAAC1H,EAAE,CAAC2H,SAAJ,CARjB;AAQiCC,EAAAA,MAAM,EAAE,CAAC,69FAAD;AARzC,CAArB,CAA1C","sourcesContent":["import { catchError, EMPTY, map, of, switchMap, take, tap, } from \"rxjs\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/sauces.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../services/auth.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/material/progress-spinner\";\nimport * as i6 from \"@angular/material/button\";\nfunction SingleSauceComponent_mat_spinner_0_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelement(0, \"mat-spinner\");\n} }\nconst _c0 = function (a0, a1, a2) { return { \"fas liked\": a0, far: a1, disabled: a2 }; };\nconst _c1 = function (a0, a1, a2) { return { \"fas disliked\": a0, far: a1, disabled: a2 }; };\nfunction SingleSauceComponent_div_1_div_11_Template(rf, ctx) { if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 13)(1, \"div\", 14)(2, \"i\", 15);\n    i0.ɵɵlistener(\"click\", function SingleSauceComponent_div_1_div_11_Template_i_click_2_listener() { i0.ɵɵrestoreView(_r8); const ctx_r7 = i0.ɵɵnextContext(2); return ctx_r7.onLike(); });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"span\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"div\", 16)(6, \"i\", 17);\n    i0.ɵɵlistener(\"click\", function SingleSauceComponent_div_1_div_11_Template_i_click_6_listener() { i0.ɵɵrestoreView(_r8); const ctx_r9 = i0.ɵɵnextContext(2); return ctx_r9.onDislike(); });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"span\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd()()();\n} if (rf & 2) {\n    const sauce_r2 = i0.ɵɵnextContext().ngIf;\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction3(4, _c0, ctx_r3.liked, !ctx_r3.liked, ctx_r3.disliked));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(sauce_r2.likes);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction3(8, _c1, ctx_r3.disliked, !ctx_r3.disliked, ctx_r3.liked));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(sauce_r2.dislikes);\n} }\nfunction SingleSauceComponent_div_1_div_12_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 18);\n    i0.ɵɵelement(1, \"mat-spinner\", 19);\n    i0.ɵɵelementEnd();\n} }\nfunction SingleSauceComponent_div_1_button_16_Template(rf, ctx) { if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 20);\n    i0.ɵɵlistener(\"click\", function SingleSauceComponent_div_1_button_16_Template_button_click_0_listener() { i0.ɵɵrestoreView(_r12); const ctx_r11 = i0.ɵɵnextContext(2); return ctx_r11.onModify(); });\n    i0.ɵɵtext(1, \" MODIFY \");\n    i0.ɵɵelementEnd();\n} }\nfunction SingleSauceComponent_div_1_button_17_Template(rf, ctx) { if (rf & 1) {\n    const _r14 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 21);\n    i0.ɵɵlistener(\"click\", function SingleSauceComponent_div_1_button_17_Template_button_click_0_listener() { i0.ɵɵrestoreView(_r14); const ctx_r13 = i0.ɵɵnextContext(2); return ctx_r13.onDelete(); });\n    i0.ɵɵtext(1, \" DELETE \");\n    i0.ɵɵelementEnd();\n} }\nfunction SingleSauceComponent_div_1_Template(rf, ctx) { if (rf & 1) {\n    const _r16 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 2);\n    i0.ɵɵelement(1, \"img\", 3);\n    i0.ɵɵelementStart(2, \"div\", 4)(3, \"h1\", 5);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\", 6);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"h3\");\n    i0.ɵɵtext(8, \"Description\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"p\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(11, SingleSauceComponent_div_1_div_11_Template, 9, 12, \"div\", 7);\n    i0.ɵɵtemplate(12, SingleSauceComponent_div_1_div_12_Template, 2, 0, \"div\", 8);\n    i0.ɵɵelementStart(13, \"div\", 9)(14, \"button\", 10);\n    i0.ɵɵlistener(\"click\", function SingleSauceComponent_div_1_Template_button_click_14_listener() { i0.ɵɵrestoreView(_r16); const ctx_r15 = i0.ɵɵnextContext(); return ctx_r15.onBack(); });\n    i0.ɵɵtext(15, \"BACK\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(16, SingleSauceComponent_div_1_button_16_Template, 2, 0, \"button\", 11);\n    i0.ɵɵtemplate(17, SingleSauceComponent_div_1_button_17_Template, 2, 0, \"button\", 12);\n    i0.ɵɵelementEnd()()();\n} if (rf & 2) {\n    const sauce_r2 = ctx.ngIf;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"src\", sauce_r2 == null ? null : sauce_r2.imageUrl, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(sauce_r2 == null ? null : sauce_r2.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"by \", sauce_r2 == null ? null : sauce_r2.manufacturer, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(sauce_r2.description);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r1.likePending);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.likePending);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.userId === sauce_r2.userId);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.userId === sauce_r2.userId);\n} }\nexport class SingleSauceComponent {\n    constructor(sauces, route, auth, router) {\n        this.sauces = sauces;\n        this.route = route;\n        this.auth = auth;\n        this.router = router;\n    }\n    ngOnInit() {\n        this.userId = this.auth.getUserId();\n        this.loading = true;\n        this.userId = this.auth.getUserId();\n        this.sauce$ = this.route.params.pipe(map((params) => params[\"id\"]), switchMap((id) => this.sauces.getSauceById(id)), tap((sauce) => {\n            this.loading = false;\n            if (sauce.usersLiked.find((user) => user === this.userId)) {\n                this.liked = true;\n            }\n            else if (sauce.usersDisliked.find((user) => user === this.userId)) {\n                this.disliked = true;\n            }\n        }));\n    }\n    onLike() {\n        if (this.disliked) {\n            return;\n        }\n        this.likePending = true;\n        this.sauce$\n            .pipe(take(1), switchMap((sauce) => this.sauces.likeSauce(sauce._id, !this.liked).pipe(tap((liked) => {\n            this.likePending = false;\n            this.liked = liked;\n        }), map((liked) => (Object.assign(Object.assign({}, sauce), { likes: liked ? sauce.likes + 1 : sauce.likes - 1 }))), tap((sauce) => (this.sauce$ = of(sauce))))))\n            .subscribe();\n    }\n    onDislike() {\n        if (this.liked) {\n            return;\n        }\n        this.likePending = true;\n        this.sauce$\n            .pipe(take(1), switchMap((sauce) => this.sauces.dislikeSauce(sauce._id, !this.disliked).pipe(tap((disliked) => {\n            this.likePending = false;\n            this.disliked = disliked;\n        }), map((disliked) => (Object.assign(Object.assign({}, sauce), { dislikes: disliked\n                ? sauce.dislikes + 1\n                : sauce.dislikes - 1 }))), tap((sauce) => (this.sauce$ = of(sauce))))))\n            .subscribe();\n    }\n    onBack() {\n        this.router.navigate([\"/sauces\"]);\n    }\n    onModify() {\n        this.sauce$\n            .pipe(take(1), tap((sauce) => this.router.navigate([\"/modify-sauce\", sauce._id])))\n            .subscribe();\n    }\n    onDelete() {\n        this.loading = true;\n        this.sauce$\n            .pipe(take(1), switchMap((sauce) => this.sauces.deleteSauce(sauce._id)), tap((message) => {\n            console.log(message);\n            this.loading = false;\n            this.router.navigate([\"/sauces\"]);\n        }), catchError((error) => {\n            this.loading = false;\n            this.errorMessage = error.message;\n            console.error(error);\n            return EMPTY;\n        }))\n            .subscribe();\n    }\n}\nSingleSauceComponent.ɵfac = function SingleSauceComponent_Factory(t) { return new (t || SingleSauceComponent)(i0.ɵɵdirectiveInject(i1.SaucesService), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i3.AuthService), i0.ɵɵdirectiveInject(i2.Router)); };\nSingleSauceComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: SingleSauceComponent, selectors: [[\"app-single-sauce\"]], decls: 3, vars: 4, consts: [[4, \"ngIf\"], [\"class\", \"sauce-container\", 4, \"ngIf\"], [1, \"sauce-container\"], [\"alt\", \"\", 3, \"src\"], [1, \"sauce-info\"], [1, \"sauce-name\"], [1, \"manufacturer\"], [\"class\", \"like-buttons\", 4, \"ngIf\"], [\"class\", \"like-pending\", 4, \"ngIf\"], [1, \"control-buttons\"], [\"mat-raised-button\", \"\", 3, \"click\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 3, \"click\", 4, \"ngIf\"], [\"mat-raised-button\", \"\", \"color\", \"warn\", 3, \"click\", 4, \"ngIf\"], [1, \"like-buttons\"], [1, \"likes\"], [1, \"like\", \"fa-thumbs-up\", \"fa-lg\", 3, \"ngClass\", \"click\"], [1, \"dislikes\"], [1, \"dislike\", \"fa-thumbs-down\", \"fa-lg\", 3, \"ngClass\", \"click\"], [1, \"like-pending\"], [1, \"white-spinner\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 3, \"click\"], [\"mat-raised-button\", \"\", \"color\", \"warn\", 3, \"click\"]], template: function SingleSauceComponent_Template(rf, ctx) { if (rf & 1) {\n        i0.ɵɵtemplate(0, SingleSauceComponent_mat_spinner_0_Template, 1, 0, \"mat-spinner\", 0);\n        i0.ɵɵtemplate(1, SingleSauceComponent_div_1_Template, 18, 8, \"div\", 1);\n        i0.ɵɵpipe(2, \"async\");\n    } if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", ctx.loading);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(2, 2, ctx.sauce$));\n    } }, directives: [i4.NgIf, i5.MatSpinner, i4.NgClass, i6.MatButton], pipes: [i4.AsyncPipe], styles: [\".sauce-container[_ngcontent-%COMP%] {\\n  display: flex;\\n}\\n.sauce-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\\n  max-height: 70vh;\\n  flex: 1;\\n}\\n.sauce-info[_ngcontent-%COMP%] {\\n  padding: 40px 20px;\\n  flex: 1;\\n}\\n.manufacturer[_ngcontent-%COMP%] {\\n  margin: 0;\\n}\\n.sauce-name[_ngcontent-%COMP%] {\\n  margin: 0;\\n}\\n.like-buttons[_ngcontent-%COMP%] {\\n  display: flex;\\n}\\n.like-buttons[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\\n  margin-right: 0.5em;\\n  cursor: pointer;\\n}\\n.likes[_ngcontent-%COMP%], .dislikes[_ngcontent-%COMP%] {\\n  margin: 0 0.4em;\\n}\\n.liked[_ngcontent-%COMP%] {\\n  color: #33db00;\\n}\\n.disliked[_ngcontent-%COMP%] {\\n  color: #db3300;\\n}\\n.like[_ngcontent-%COMP%]:hover {\\n  color: #33db00;\\n}\\n.dislike[_ngcontent-%COMP%] {\\n  transform: scaleX(-1) translateY(5px);\\n}\\n.dislike[_ngcontent-%COMP%]:hover {\\n  color: #db3300;\\n}\\n.disabled[_ngcontent-%COMP%] {\\n  cursor: none;\\n  color: #bebebe;\\n}\\n.disabled[_ngcontent-%COMP%]:hover {\\n  color: #bebebe;\\n}\\n.control-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\\n  margin: 1em 1em 0 0;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNpbmdsZS1zYXVjZS5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGFBQUE7QUFDSjtBQUFJO0VBQ0ksZ0JBQUE7RUFDQSxPQUFBO0FBRVI7QUFFQTtFQUNJLGtCQUFBO0VBQ0EsT0FBQTtBQUNKO0FBRUE7RUFDSSxTQUFBO0FBQ0o7QUFFQTtFQUNJLFNBQUE7QUFDSjtBQUVBO0VBQ0ksYUFBQTtBQUNKO0FBQUk7RUFDSSxtQkFBQTtFQUNBLGVBQUE7QUFFUjtBQUVBOztFQUVJLGVBQUE7QUFDSjtBQUVBO0VBQ0ksY0FBQTtBQUNKO0FBRUE7RUFDSSxjQUFBO0FBQ0o7QUFHSTtFQUNJLGNBQUE7QUFBUjtBQUlBO0VBQ0kscUNBQUE7QUFESjtBQUVJO0VBQ0ksY0FBQTtBQUFSO0FBSUE7RUFDSSxZQUFBO0VBSUEsY0FBQTtBQUpKO0FBQ0k7RUFDSSxjQUFBO0FBQ1I7QUFLSTtFQUNJLG1CQUFBO0FBRlIiLCJmaWxlIjoic2luZ2xlLXNhdWNlLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLnNhdWNlLWNvbnRhaW5lciB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBpbWcge1xuICAgICAgICBtYXgtaGVpZ2h0OiA3MHZoO1xuICAgICAgICBmbGV4OiAxO1xuICAgIH1cbn1cblxuLnNhdWNlLWluZm8ge1xuICAgIHBhZGRpbmc6IDQwcHggMjBweDtcbiAgICBmbGV4OiAxO1xufVxuXG4ubWFudWZhY3R1cmVyIHtcbiAgICBtYXJnaW46IDA7XG59XG5cbi5zYXVjZS1uYW1lIHtcbiAgICBtYXJnaW46IDA7XG59XG5cbi5saWtlLWJ1dHRvbnMge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgaSB7XG4gICAgICAgIG1hcmdpbi1yaWdodDogMC41ZW07XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICB9XG59XG5cbi5saWtlcyxcbi5kaXNsaWtlcyB7XG4gICAgbWFyZ2luOiAwIDAuNGVtO1xufVxuXG4ubGlrZWQge1xuICAgIGNvbG9yOiByZ2JhKDUxLCAyMTksIDAsIDEpO1xufVxuXG4uZGlzbGlrZWQge1xuICAgIGNvbG9yOiByZ2JhKDIxOSwgNTEsIDAsIDEpO1xufVxuXG4ubGlrZSB7XG4gICAgJjpob3ZlciB7XG4gICAgICAgIGNvbG9yOiByZ2JhKDUxLCAyMTksIDAsIDEpO1xuICAgIH1cbn1cblxuLmRpc2xpa2Uge1xuICAgIHRyYW5zZm9ybTogc2NhbGVYKC0xKSB0cmFuc2xhdGVZKDVweCk7XG4gICAgJjpob3ZlciB7XG4gICAgICAgIGNvbG9yOiByZ2JhKDIxOSwgNTEsIDAsIDEpO1xuICAgIH1cbn1cblxuLmRpc2FibGVkIHtcbiAgICBjdXJzb3I6IG5vbmU7XG4gICAgJjpob3ZlciB7XG4gICAgICAgIGNvbG9yOiByZ2JhKDE5MCwgMTkwLCAxOTAsIDEpO1xuICAgIH1cbiAgICBjb2xvcjogcmdiYSgxOTAsIDE5MCwgMTkwLCAxKTtcbn1cblxuLmNvbnRyb2wtYnV0dG9ucyB7XG4gICAgYnV0dG9uIHtcbiAgICAgICAgbWFyZ2luOiAxZW0gMWVtIDAgMDtcbiAgICB9XG59XG4iXX0= */\"] });\n"]},"metadata":{},"sourceType":"module"}